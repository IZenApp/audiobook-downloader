#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Audiobook Downloader
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ö–æ–¥–Ω—ã—Ö –ø—É—Ç–µ–π –¥–ª—è YouTube –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
"""

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è yt-dlp –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ YouTube —Å MP3 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
YDL_CONFIG = {
    'format': 'bestaudio/best',
    'ignoreerrors': True,
    'no_warnings': False,  # –í–∫–ª—é—á–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    'noplaylist': True,
    'extract_flat': False,
    'postprocessors': [{
        'key': 'FFmpegExtractAudio',
        'preferredcodec': 'mp3',
        'preferredquality': '192',
    }],
    'writeinfojson': False,
    'writethumbnail': False,
    
    # –û–±—Ö–æ–¥–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è YouTube –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
    'extractor_args': {
        'youtube': {
            'player_client': ['android', 'web'],
            'skip': ['dash', 'hls']
        }
    },
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
    'retries': 3,
    'socket_timeout': 30,
    'http_chunk_size': 1048576,  # 1MB chunks
}

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
SEARCH_PATTERNS = [
    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç
    '"{author} {title}" {narrator} –∞—É–¥–∏–æ–∫–Ω–∏–≥–∞',
    # –ë–µ–∑ —á—Ç–µ—Ü–∞
    '"{author} {title}" –∞—É–¥–∏–æ–∫–Ω–∏–≥–∞ –ø–æ–ª–Ω–∞—è',
    # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π
    '{author} {title} –∞—É–¥–∏–æ–∫–Ω–∏–≥–∞',
    # –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
    '"{author} {title}" –∞—É–¥–∏–æ–∫–Ω–∏–≥–∞ —Å–ª—É—à–∞—Ç—å',
    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    '–∞—É–¥–∏–æ–∫–Ω–∏–≥–∞ {author} {title}',
]

# –°–ø–∏—Å–æ–∫ –Ω–∞–¥–µ–∂–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∞—É–¥–∏–æ–∫–Ω–∏–≥
TRUSTED_SOURCES = [
    'youtube.com',
    'youtu.be',
    'vk.com',
    'ok.ru',
    'archive.org',
    'soundcloud.com'
]

# –§–∏–ª—å—Ç—Ä—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
SEARCH_FILTERS = [
    '–¥–ª–∏–Ω–Ω',  # –¥–ª–∏–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
    '–ø–æ–ª–Ω',   # –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è  
    '—Ü–µ–ª–∏–∫',  # —Ü–µ–ª–∏–∫–æ–º
    '–≤–µ—Å—å',   # –≤—Å—è –∫–Ω–∏–≥–∞
    '—á–∞—Å—Ç—å 1', # –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å
    '–≥–ª–∞–≤–∞ 1'  # –ø–µ—Ä–≤–∞—è –≥–ª–∞–≤–∞
]

# –ò—Å–∫–ª—é—á–µ–Ω–∏—è (–ø–ª–æ—Ö–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
EXCLUDE_TERMS = [
    '–∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ',
    '–ø–µ—Ä–µ—Å–∫–∞–∑',
    '–∞–Ω–æ–Ω—Å',
    '—Ç—Ä–µ–π–ª–µ—Ä',
    '–æ—Ç—Ä—ã–≤–æ–∫',
    '—Ñ—Ä–∞–≥–º–µ–Ω—Ç'
]
